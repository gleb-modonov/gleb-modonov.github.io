System.register("chunks:///_virtual/AnimationEventListener.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventEmitterMixin.ts"],(function(t){"use strict";var n,i,e,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,o=t.Component},function(t){r=t.EventEmitterMixin}],execute:function(){var s;i._RF.push({},"c16d7m+AfNLJ4kiTfMQOTEK","AnimationEventListener",void 0);var c=e.ccclass;t("AnimationEventListener",c("AnimationEventListener")(s=function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.animationEvent=function(t){this.emit("animationEvent",t)},i}(r(o)))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc"],(function(t){"use strict";var e,a,i,r;return{setters:[function(t){e=t.cclegacy,a=t._decorator,i=t.Node,r=t.AudioSource}],execute:function(){var u;e._RF.push({},"6f013kFcQ1KOZM2+o7T5Fk6","AudioManager",void 0);var s=a.ccclass;t("AudioManager",s("AudioManager")(u=function(){function t(t,e,a){this.audioSources=[],this.sourceStatus=new Map,this.playedClips=new Set,t.registerUpdatable(this);for(var u=0;u<a;u++){var s=new i("AudioSource_"+u);s.setParent(e);var o=s.addComponent(r);this.audioSources.push(o),this.sourceStatus.set(o,!1)}}var e=t.prototype;return e.playAudio=function(t){var e=this;if(!this.playedClips.has(t)){var a=this.audioSources.find((function(t){return!e.sourceStatus.get(t)}));if(a){this.playedClips.add(t),this.sourceStatus.set(a,!0),a.clip=t,a.play();var i=t.getDuration?t.getDuration():0;this.freeSourceAfterDuration(a,i)}}},e.freeSourceAfterDuration=function(t,e){var a=this;t.node.once("ended",(function(){a.sourceStatus.set(t,!1)}))},e.clearPlayedClips=function(){this.playedClips.clear()},e.update=function(t){},e.lateUpdate=function(t){this.clearPlayedClips()},t}())||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Bootstrapper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraManager.ts","./InputManager.ts","./LevelManager.ts","./ResourceManager.ts","./UpgradeManager.ts","./CameraMovement.ts","./UIManager.ts","./GameplayWindow.ts","./ReferencesContainer.ts","./DataContainer.ts","./UpdateManager.ts","./Player.ts","./PlayerAvatar.ts","./GameplayController.ts","./VictoryWindow.ts","./PoolManager.ts","./AudioManager.ts"],(function(e){"use strict";var a,n,r,t,i,o,l,u,c,s,p,f,b,g,d,m,v,y,M,C,h,P,w,z,A,R,U,I,W;return{setters:[function(e){a=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Prefab,u=e.Node,c=e.Camera,s=e.Canvas,p=e.instantiate,f=e.Component},function(e){b=e.CameraManager},function(e){g=e.InputManager},function(e){d=e.LevelManager},function(e){m=e.ResourceManager},function(e){v=e.UpgradeManager},function(e){y=e.CameraMovement},function(e){M=e.UIManager},function(e){C=e.GameplayWindow},function(e){h=e.ReferencesContainer},function(e){P=e.DataContainer},function(e){w=e.UpdateManager},function(e){z=e.Player},function(e){A=e.PlayerAvatar},function(e){R=e.GameplayController},function(e){U=e.VictoryWindow},function(e){I=e.PoolManager},function(e){W=e.AudioManager}],execute:function(){var B,D,G,L,S,_,V,x,F,J,K,j,k,q,H,N,T,E,O,Q,X;i._RF.push({},"1b4ba5Jf89MPoJKh8May7Km","Bootstrapper",void 0);var Y=o.ccclass,Z=o.property;e("Bootstrapper",(B=Y("Bootstrapper"),D=Z(w),G=Z(l),L=Z(l),S=Z(l),_=Z(u),V=Z(u),x=Z(c),F=Z(y),J=Z(s),B((k=a((j=function(e){function a(){for(var a,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=e.call.apply(e,[this].concat(i))||this,r(a,"updateManager",k,t(a)),r(a,"playerAvatarPrefab",q,t(a)),r(a,"referencesContainerPrefab",H,t(a)),r(a,"dataContainerPrefab",N,t(a)),r(a,"levelParent",T,t(a)),r(a,"audioContainer",E,t(a)),r(a,"camera",O,t(a)),r(a,"cameraMovement",Q,t(a)),r(a,"canvas",X,t(a)),a}n(a,e);var i=a.prototype;return i.onLoad=function(){this.initializeServices()},i.initializeServices=function(){if(this.updateManager&&this.playerAvatarPrefab&&this.referencesContainerPrefab&&this.dataContainerPrefab){var e=p(this.referencesContainerPrefab),a=e.getComponent(h);this.levelParent.addChild(e);var n=p(this.dataContainerPrefab),r=n.getComponent(P);this.levelParent.addChild(n);var t=new b(this.camera,this.cameraMovement),i=new W(this.updateManager,this.audioContainer,r.MaxAudioSources),o=new m,l=new I(a.PrepoolingData),u=p(a.UIReferences.GameplayWindowPrefab).getComponent(C),c=p(a.UIReferences.VictoryWindowPrefab).getComponent(U),s=new M(t,this.canvas,u,c,a,r,l,o),f=new g(s),y=new d(r,this.levelParent),w=p(this.playerAvatarPrefab).getComponent(A);this.levelParent.addChild(w.node);var B=new z(this.updateManager,r,f,t,this.cameraMovement,w),D=new v(r,o);new R(a,r,f,y,i,l,o,D,s,u,c,w,B.WeaponController)}else console.error("Missing required prefabs or managers in the Bootstrapper.")},a}(f)).prototype,"updateManager",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=a(j.prototype,"playerAvatarPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=a(j.prototype,"referencesContainerPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=a(j.prototype,"dataContainerPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=a(j.prototype,"levelParent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=a(j.prototype,"audioContainer",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=a(j.prototype,"camera",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=a(j.prototype,"cameraMovement",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=a(j.prototype,"canvas",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=j))||K));i._RF.pop()}}}));

System.register("chunks:///_virtual/BreakableObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaterialFlash.ts","./TypedEventEmitter.ts","./ResourceType.ts"],(function(e){"use strict";var t,r,i,n,a,s,o,l,u,c,h,d,f,p,m,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){s=e.cclegacy,o=e._decorator,l=e.Enum,u=e.Node,c=e.AudioClip,h=e.Collider,d=e.Animation,f=e.MeshRenderer,p=e.Component},function(e){m=e.MaterialFlash},function(e){y=e.TypedEventEmitter},function(e){b=e.ResourceType}],execute:function(){var g,v,R,M,D,A,k,w,z,C,T,F,B,x,L,j,P,E,O;s._RF.push({},"e2d1aJCdTxP57qBRX5ymvrL","BreakableObject",void 0);var H=o.ccclass,_=o.property;e("BreakableObject",(g=H("BreakableObject"),v=_({type:l(b)}),R=_(u),M=_(c),D=_(h),A=_(d),k=_(f),w=_(f),g((T=t((C=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))||this).isDamageable=!0,i(t,"resourceType",T,n(t)),i(t,"maxResources",F,n(t)),t.currentResources=0,i(t,"level",B,n(t)),i(t,"uiAnchor",x,n(t)),i(t,"damageAudioClip",L,n(t)),i(t,"collider",j,n(t)),i(t,"damageAnimation",P,n(t)),i(t,"defaultMeshRenderer",E,n(t)),i(t,"destroyedMeshRenderer",O,n(t)),t.flashMaterial=null,t.materialFlash=null,t.events=void 0,t}r(t,e);var s=t.prototype;return s.init=function(e){this.flashMaterial=e,this.setup()},s.onLoad=function(){this.events=new y},s.onDestroy=function(){this.materialFlash.destroy()},s.setup=function(){if(this.defaultMeshRenderer&&this.collider&&this.damageAnimation){this.currentResources=this.maxResources;var e=this.defaultMeshRenderer.getMaterial(0);this.materialFlash=new m(this.defaultMeshRenderer,e,this.flashMaterial,.1),this.setDestroyedVisual(!1)}else console.error("BreakableObject misses components")},s.receiveDamage=function(e,t){if(!this.isDestroyed())if(this.events.emit("onDamageStarted"),this.materialFlash.damageFlash(),this.damageAnimation.play(),t<this.level)this.events.emit("onDamageBlocked");else{var r=Math.min(e,this.CurrentHP);this.currentResources-=r,this.events.emit("onDamageReceived",r),this.isDestroyed()&&this.onDestroyLogic()}},s.isDestroyed=function(){return this.currentResources<=0},s.onDestroyLogic=function(){this.collider.enabled=!1,this.setDestroyedVisual(!0),this.events.emit("onDestroyed")},s.setDestroyedVisual=function(e){this.defaultMeshRenderer&&(this.defaultMeshRenderer.node.active=!e),this.destroyedMeshRenderer&&(this.destroyedMeshRenderer.node.active=e)},a(t,[{key:"ResourceType",get:function(){return this.resourceType}},{key:"MaxHP",get:function(){return this.maxResources}},{key:"CurrentHP",get:function(){return this.currentResources}},{key:"Level",get:function(){return this.level},set:function(e){this.level=e}},{key:"UIAnchor",get:function(){return this.uiAnchor}},{key:"DamageAudioClip",get:function(){return this.damageAudioClip}}]),t}(p)).prototype,"resourceType",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.None}}),F=t(C.prototype,"maxResources",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),B=t(C.prototype,"level",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=t(C.prototype,"uiAnchor",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(C.prototype,"damageAudioClip",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(C.prototype,"collider",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(C.prototype,"damageAnimation",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(C.prototype,"defaultMeshRenderer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(C.prototype,"destroyedMeshRenderer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=C))||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/CameraManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var a,n,r;return{setters:[function(e){a=e.createClass},function(e){n=e.cclegacy,r=e._decorator}],execute:function(){var t;n._RF.push({},"f37e3QAu1dLOrUYAQHOXvXP","CameraManager",void 0);var o=r.ccclass;e("CameraManager",o("CameraManager")(t=function(){function e(e,a){this.mainCamera=e,this.cameraMovement=a}var n=e.prototype;return n.getMainCamera=function(){return this.mainCamera},n.enableFollow=function(){this.cameraMovement&&(this.cameraMovement.enabled=!0)},n.disableFollow=function(){this.cameraMovement&&(this.cameraMovement.enabled=!1)},a(e,[{key:"CameraAngle",get:function(){return this.mainCamera.node.parent.eulerAngles.y*(Math.PI/180)}}]),e}())||t);n._RF.pop()}}}));

System.register("chunks:///_virtual/CameraMovement.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,o,i,n,a,s,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Node,c=t.Vec3,l=t.Component}],execute:function(){var u,p,f,h,g;n._RF.push({},"c511bRQ2rlIVoz0wEEQxMpw","CameraMovement",void 0);var v=a.ccclass,d=a.property;t("CameraMovement",(u=v("CameraMovement"),p=d({type:s}),u((g=e((h=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"target",g,i(e)),e.offset=new c,e}r(e,t);var n=e.prototype;return n.update=function(t){this.target&&this.followTarget()},n.followTarget=function(){var t=new c;c.add(t,this.offset,this.target.position),this.node.setPosition(t)},n.setTarget=function(t){t&&(this.target=t,c.subtract(this.offset,this.node.position,this.target.position))},n.clearTarget=function(){this.target=null},e}(l)).prototype,"target",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/DamageableDetector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventEmitterMixin.ts"],(function(e){"use strict";var t,a,n,r,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,n=e._decorator,r=e.Collider,o=e.Component},function(e){i=e.EventEmitterMixin}],execute:function(){var s;a._RF.push({},"36a38vcnqRP76FIDLXDhkNy","DamageableDetector",void 0);var g=n.ccclass;e("DamageableDetector",g("DamageableDetector")(s=function(e){function a(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).detectedDamageables=new Set,t}t(a,e);var n=a.prototype;return n.start=function(){var e=this.getComponent(r);e?(e.on("onTriggerEnter",this.onTriggerEnter,this),e.on("onTriggerExit",this.onTriggerExit,this)):console.error("No Collider component on DamageableDetector node.")},n.onDestroy=function(){var e=this.getComponent(r);e&&(e.off("onTriggerEnter",this.onTriggerEnter,this),e.off("onTriggerExit",this.onTriggerExit,this))},n.onTriggerEnter=function(e){var t=this.getDamageable(e.otherCollider.node);t&&this.addDamageable(t)},n.onTriggerExit=function(e){var t=this.getDamageable(e.otherCollider.node);t&&this.removeDamageable(t)},n.addDamageable=function(e){this.detectedDamageables.add(e);var t=this.handleDamageableDestroyed.bind(this,e);e.events.on("onDestroyed",t),this.emit("detectChanged",this.getDetectedDamageables())},n.removeDamageable=function(e){var t=this.handleDamageableDestroyed.bind(this,e);e.events.off("onDestroyed",t),this.detectedDamageables.delete(e),this.emit("detectChanged",this.getDetectedDamageables())},n.handleDamageableDestroyed=function(e){this.removeDamageable(e)},n.getDamageable=function(e){var t=e.getComponent(o);return t&&this.isDamageable(t)?t:null},n.getDetectedDamageables=function(){return this.detectedDamageables},n.isDamageable=function(e){return!0===e.isDamageable},a}(i(o)))||s);a._RF.pop()}}}));

System.register("chunks:///_virtual/DamageableEvents.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e2187dokZhJr7OT74/4M5ro","DamageableEvents",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/DamageUIHandler.ts",["cc"],(function(e){"use strict";var a,n,r;return{setters:[function(e){a=e.cclegacy,n=e._decorator,r=e.ProgressBar}],execute:function(){var t;a._RF.push({},"ddb2ei/xBBHG7HxWHevwkwz","DamageUIHandler",void 0);var o=n.ccclass;e("DamageUIHandler",o("DamageUIHandler")(t=function(){function e(e,a,n){this.referencesContainer=e,this.poolManager=a,this.uiManager=n}var a=e.prototype;return a.requestUIBar=function(e,a){var n=this,t=this.poolManager.spawn(this.referencesContainer.UIReferences.UIBarPrefab);this.uiManager.addWorldToUIFollower(t,e);var o=t.getComponent(r),i=0;a.events.on("onDamageReceived",(function(){o.progress=a.CurrentHP/a.MaxHP,t.active=!0,i&&clearTimeout(i),i=setTimeout((function(){t.active=!1}),2e3)})),a.events.on("onDestroyed",(function(){i&&clearTimeout(i),n.poolManager.despawn(t)})),t.active=!1},a.requestUIDamageBlocked=function(e,a){var n=this,r=this.poolManager.spawn(this.referencesContainer.UIReferences.UIDamageBlockedPrefab);this.uiManager.addWorldToUIFollower(r,e);var t=0;a.events.on("onDamageBlocked",(function(){r.active=!0,t&&clearTimeout(t),t=setTimeout((function(){r.active=!1}),2e3)})),a.events.on("onDestroyed",(function(){t&&clearTimeout(t),n.poolManager.despawn(r)})),r.active=!1},e}())||t);a._RF.pop()}}}));

System.register("chunks:///_virtual/DataContainer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceCollection.ts","./LevelCollection.ts","./WeaponCollection.ts","./UpgradeCollection.ts","./PlayerMovementData.ts"],(function(e){"use strict";var t,o,n,r,i,a,l,u,c,s,p,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass},function(e){a=e.cclegacy,l=e._decorator,u=e.Component},function(e){c=e.ResourceCollection},function(e){s=e.LevelCollection},function(e){p=e.WeaponCollection},function(e){f=e.UpgradeCollection},function(e){g=e.PlayerMovementData}],execute:function(){var C,d,m,y,b,v,D,h,w,L,z,R,U,M,A;a._RF.push({},"0581aTi/nBL8aloHeKK45+F","DataContainer",void 0);var x=l.ccclass,P=l.property;e("DataContainer",(C=x("DataContainer"),d=P(g),m=P(c),y=P(s),b=P(f),v=P(p),C((w=t((h=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"downloadGameURL",w,r(t)),n(t,"maxAudioSources",L,r(t)),n(t,"playerMovementData",z,r(t)),n(t,"resourceCollection",R,r(t)),n(t,"levelCollection",U,r(t)),n(t,"upgradeCollection",M,r(t)),n(t,"weaponCollection",A,r(t)),t}o(t,e);var a=t.prototype;return a.onLoad=function(){this.resourceCollection&&this.playerMovementData&&this.levelCollection&&this.upgradeCollection&&this.weaponCollection?this.resourceCollection.initialize():console.error("One or more required fields are missing in DataContainer.")},a.getResourceData=function(e){return this.resourceCollection.getResourceData(e)},a.getLevel=function(e){return this.levelCollection.getLevel(e)},a.getUpgradeData=function(e){return this.upgradeCollection.getUpgradeData(e)},a.getUpgradeAmount=function(){return this.upgradeCollection.getUpgradeAmount()},a.getWeaponData=function(e){return this.weaponCollection.getWeaponData(e)},i(t,[{key:"DownloadGameURL",get:function(){return this.downloadGameURL}},{key:"MaxAudioSources",get:function(){return this.maxAudioSources}},{key:"PlayerMovementData",get:function(){return this.playerMovementData}}]),t}(u)).prototype,"downloadGameURL",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=t(h.prototype,"maxAudioSources",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),z=t(h.prototype,"playerMovementData",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(h.prototype,"resourceCollection",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(h.prototype,"levelCollection",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(h.prototype,"upgradeCollection",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(h.prototype,"weaponCollection",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=h))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/EventEmitter.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e27a3GgRxhGh43kaCOFd2FL","EventEmitter",void 0);t("EventEmitter",function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){var n=this.listeners[t];n&&(this.listeners[t]=n.filter((function(t){return t!==e})))},e.emit=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=this.listeners[t];r&&r.forEach((function(t){return t.apply(void 0,n)}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/EventEmitterMixin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventEmitter.ts"],(function(t){"use strict";var n,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.EventEmitter}],execute:function(){t("EventEmitterMixin",(function(t){return function(t){function e(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(n=t.call.apply(t,[this].concat(r))||this).eventEmitter=new i,n}n(e,t);var r=e.prototype;return r.on=function(t,n){this.eventEmitter.on(t,n)},r.off=function(t,n){this.eventEmitter.off(t,n)},r.emit=function(t){for(var n,e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];(n=this.eventEmitter).emit.apply(n,[t].concat(i))},e}(t)})),e._RF.push({},"1fd0bwm4kFN/rYTCmpE5ENM","EventEmitterMixin",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayController.ts",["cc"],(function(e){"use strict";var a,t,n,r;return{setters:[function(e){a=e.cclegacy,t=e._decorator,n=e.Vec3,r=e.ParticleSystem}],execute:function(){var i;a._RF.push({},"7270cQboR1Mg7wODu5VqqmM","GameplayController",void 0);var o=t.ccclass;e("GameplayController",o("GameplayController")(i=function(){function e(e,a,t,n,r,i,o,s,u,p,g,l,d){this.tutorialHandler=void 0,this.referencesContainer=e,this.dataContainer=a,this.inputManager=t,this.levelManager=n,this.audioManager=r,this.poolManager=i,this.resourceManager=o,this.upgradeManager=s,this.uiManager=u,this.gameplayWindow=p,this.victoryWindow=g,this.playerAvatar=l,this.weaponController=d,this.setup()}var a=e.prototype;return a.setup=function(){this.setupBreakableObjects(),this.setupUpgrades(),this.setupUI(),this.setupPlayerAvatar(),this.setupWinTrigger()},a.setupBreakableObjects=function(){var e=this,a=this.referencesContainer.FlashMaterial;this.levelManager.BreakableObjects.forEach((function(t){e.createUIForBreakableObject(t),t.events.on("onDamageStarted",(function(){e.audioManager.playAudio(t.DamageAudioClip);var a=e.poolManager.spawn(e.referencesContainer.DamageVFX,1);a.setParent(t.node),a.position=n.ZERO,a.getComponentsInChildren(r).forEach((function(e){return e.play()}))})),t.events.on("onDamageReceived",(function(a){e.resourceManager.addResource(t.ResourceType,a)})),t.init(a)}))},a.createUIForBreakableObject=function(e){var a=this,t=e.UIAnchor;this.uiManager.DamageUIHandler.requestUIBar(t,e),this.uiManager.DamageUIHandler.requestUIDamageBlocked(t,e),e.events.on("onDamageReceived",(function(n){a.uiManager.PopupUIHandler.requestResourcePopup(e.ResourceType,n,t)}))},a.setupUpgrades=function(){var e=this;this.gameplayWindow.UpgradeButton.node.on("click",this.upgradeManager.applyUpgrade,this.upgradeManager),this.gameplayWindow.setUpgradeButtonState(!1),this.upgradeManager.on("upgradeAvailabilityChecked",(function(a){e.gameplayWindow.setUpgradeButtonState(a)})),this.upgradeManager.on("upgradeDataLoaded",(function(a){e.updateUpgradeUI(a)})),this.upgradeManager.on("upgradeApplied",(function(a){var t=e.dataContainer.getWeaponData(a+1);e.weaponController.updateWeapon(t),e.uiManager.PopupUIHandler.requestUpgradePopup(e.playerAvatar.UIAnchor)})),this.upgradeManager.on("upgradeMaxReached",(function(){e.gameplayWindow.UpgradeButton.node.off("click",e.upgradeManager.applyUpgrade,e.upgradeManager),e.gameplayWindow.setUpgradeButtonState(!1)}))},a.setupUI=function(){this.updateUpgradeUI(this.upgradeManager.CurrentUpgradeData),this.victoryWindow.MRAIDBurron.node.on("click",this.openURL,this),this.gameplayWindow.setTutorialState(!0),this.tutorialHandler=this.disableTutorial.bind(this),this.inputManager.on("inputStart",this.tutorialHandler)},a.disableTutorial=function(){this.gameplayWindow.setTutorialState(!1),this.tutorialHandler&&(this.inputManager.off("inputStart",this.tutorialHandler),this.tutorialHandler=null)},a.updateUpgradeUI=function(e){var a=this.gameplayWindow.UpgradeButtonCounter,t=this.dataContainer.getResourceData(e.ResourceType).Icon;a.setAmount(e.ResourceAmount),a.setIcon(t)},a.openURL=function(){var e=this.dataContainer.DownloadGameURL;window.open(e,"_blank")},a.setupPlayerAvatar=function(){var e=this;this.playerAvatar.DirectionHint.setTarget(this.levelManager.WinTrigger.node),this.playerAvatar.DirectionHint.setState(!1),this.upgradeManager.on("upgradeMaxReached",(function(){e.playerAvatar.DirectionHint.setState(!0)}))},a.setupWinTrigger=function(){this.levelManager.WinTrigger.on("triggerEnter",this.handleWinTriggerEnter.bind(this))},a.handleWinTriggerEnter=function(e){e===this.playerAvatar.node&&this.handleGameVictory()},a.handleGameVictory=function(){this.playerAvatar.DirectionHint.setState(!1),this.inputManager.disableInput(),this.uiManager.showVictoryState()},e}())||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIWindow.ts","./UIJoystick.ts","./UICounter.ts"],(function(t){"use strict";var e,n,r,i,o,u,a,l,c,s,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){u=t.cclegacy,a=t._decorator,l=t.Button,c=t.Node},function(t){s=t.UIWindow},function(t){p=t.UIJoystick},function(t){f=t.UICounter}],execute:function(){var y,d,g,b,w,h,B,C,m,k,v,U,z,I,W;u._RF.push({},"c46e7QsmfVBTa9mj3/KWIMu","GameplayWindow",void 0);var J=a.ccclass,G=a.property;t("GameplayWindow",(y=J("GameplayWindow"),d=G(p),g=G(l),b=G(f),w=G(c),h=G(c),B=G(c),y((k=e((m=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o))||this,r(e,"uiJoystick",k,i(e)),r(e,"upgradeButton",v,i(e)),r(e,"upgradeButtonCounter",U,i(e)),r(e,"resourceContainer",z,i(e)),r(e,"followersContainer",I,i(e)),r(e,"tutorial",W,i(e)),e}n(e,t);var u=e.prototype;return u.setTutorialState=function(t){this.tutorial.active=t},u.setUpgradeButtonState=function(t){this.upgradeButton.node.active=t},u.hideUpgradeButtonState=function(){this.upgradeButton.node.active=!1},o(e,[{key:"Joystick",get:function(){return this.uiJoystick}},{key:"UpgradeButton",get:function(){return this.upgradeButton}},{key:"UpgradeButtonCounter",get:function(){return this.upgradeButtonCounter}},{key:"ResourceContainer",get:function(){return this.resourceContainer}},{key:"FollowersContainer",get:function(){return this.followersContainer}}]),e}(s)).prototype,"uiJoystick",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(m.prototype,"upgradeButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(m.prototype,"upgradeButtonCounter",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(m.prototype,"resourceContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(m.prototype,"followersContainer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(m.prototype,"tutorial",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=m))||C));u._RF.pop()}}}));

System.register("chunks:///_virtual/IDamageable.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"200d0jkuflHupddfXYKPnn/","IDamageable",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/InputManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventEmitterMixin.ts"],(function(t){"use strict";var i,e,n,s;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){s=t.EventEmitterMixin}],execute:function(){var c;e._RF.push({},"8f716QOcqxPgJXicKmJDP3t","InputManager",void 0);var o=n.ccclass;t("InputManager",o("InputManager")(c=function(t){function e(i){var e;return(e=t.call(this)||this).isActive=!0,e.subscribeToJoystick(i),e}i(e,t);var n=e.prototype;return n.subscribeToJoystick=function(t){t.JoystickUIHandler.subscribeJoystickEvents({start:this.handleJoystickInputStart.bind(this),move:this.handleJoystickMove.bind(this),release:this.handleJoystickRelease.bind(this)})},n.unsubscribeJoystickEvents=function(t){t&&t.JoystickUIHandler.unsubscribeJoystickEvents({start:this.handleJoystickInputStart.bind(this),move:this.handleJoystickMove.bind(this),release:this.handleJoystickRelease.bind(this)})},n.handleJoystickInputStart=function(t){this.isActive&&(this.handleJoystickMove(t),this.emit("inputStart",t))},n.handleJoystickMove=function(t){this.isActive&&this.emit("inputMove",t)},n.handleJoystickRelease=function(){this.emit("inputEnd")},n.disableInput=function(){this.handleJoystickRelease(),this.isActive=!1},n.enableInput=function(){this.isActive=!0},e}(s(function(){return function(){}}())))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/IUpdatable.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"70a195+5VNL46WXt+l2kZ1Q","IUpdatable",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/JoystickUIHandler.ts",["cc"],(function(t){"use strict";var s,i;return{setters:[function(t){s=t.cclegacy,i=t._decorator}],execute:function(){var o;s._RF.push({},"d1299PWrlpAm68yFzqluDor","JoystickUIHandler",void 0);var c=i.ccclass;t("JoystickUIHandler",c("JoystickUIHandler")(o=function(){function t(t){this.uiJoystick=t}var s=t.prototype;return s.subscribeJoystickEvents=function(t){this.uiJoystick.on("joystickInputStart",t.start),this.uiJoystick.on("joystickMove",t.move),this.uiJoystick.on("joystickRelease",t.release)},s.unsubscribeJoystickEvents=function(t){this.uiJoystick.off("joystickInputStart",t.start),this.uiJoystick.off("joystickMove",t.move),this.uiJoystick.off("joystickRelease",t.release)},t}())||o);s._RF.pop()}}}));

System.register("chunks:///_virtual/LevelCollection.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,l,r,o,i;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.initializerDefineProperty},function(e){r=e.cclegacy,o=e._decorator,i=e.Prefab}],execute:function(){var n,c,s,u,a;r._RF.push({},"ccdb0h4OtRBGJe5fnzR9vIl","LevelCollection",void 0);var v=o.ccclass,p=o.property;e("LevelCollection",(n=v("LevelCollection"),c=p(i),n((a=t((u=function(){function e(){l(this,"levels",a,this)}return e.prototype.getLevel=function(e){if(e>=0&&e<this.levels.length)return this.levels[e];console.error("No level with ID "+e)},e}()).prototype,"levels",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=u))||s));r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BreakableObject.ts","./TriggerZone.ts"],(function(e){"use strict";var t,r,n,l,c,u;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,n=e._decorator,l=e.instantiate},function(e){c=e.BreakableObject},function(e){u=e.TriggerZone}],execute:function(){var i;r._RF.push({},"60dfbJmV0xDdrVQJiqoskyu","LevelManager",void 0);var s=n.ccclass;e("LevelManager",s("LevelManager")(i=function(){function e(e,t){this.currentLevel=null,this.setupLevel(e.getLevel(0),t)}var r=e.prototype;return r.setupLevel=function(e,t){this.clearLevel(),this.currentLevel=l(e),this.currentLevel.parent=t},r.clearLevel=function(){null!=this.currentLevel&&(this.currentLevel.destroy(),this.currentLevel=null)},t(e,[{key:"BreakableObjects",get:function(){return this.currentLevel?this.currentLevel.getComponentsInChildren(c):[]}},{key:"WinTrigger",get:function(){return this.currentLevel?this.currentLevel.getComponentInChildren(u):null}}]),e}())||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Bootstrapper.ts","./DataContainer.ts","./GameplayController.ts","./ReferencesContainer.ts","./ServiceLocator.ts","./LevelCollection.ts","./PlayerMovementData.ts","./PrepoolingData.ts","./ResourceCollection.ts","./ResourceData.ts","./UIReferences.ts","./UpgradeCollection.ts","./UpgradeData.ts","./WeaponCollection.ts","./WeaponData.ts","./ResourceType.ts","./EventEmitter.ts","./EventEmitterMixin.ts","./TypedEventEmitter.ts","./AnimationEventListener.ts","./BreakableObject.ts","./CameraMovement.ts","./DamageableDetector.ts","./MaterialFlash.ts","./RotateToTarget.ts","./TriggerZone.ts","./DamageableEvents.ts","./IDamageable.ts","./IUpdatable.ts","./AudioManager.ts","./CameraManager.ts","./InputManager.ts","./LevelManager.ts","./PoolManager.ts","./ResourceManager.ts","./UpdateManager.ts","./UpgradeManager.ts","./Player.ts","./PlayerAnimation.ts","./PlayerAvatar.ts","./PlayerMovement.ts","./WeaponController.ts","./GameplayWindow.ts","./DamageUIHandler.ts","./JoystickUIHandler.ts","./PopupUIHandler.ts","./ResourceUIHandler.ts","./UICounter.ts","./UIJoystick.ts","./UIManager.ts","./UIWindow.ts","./VictoryWindow.ts","./WorldToUIFollower.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MaterialFlash.ts",["cc"],(function(e){"use strict";var t,a;return{setters:[function(e){t=e.cclegacy,a=e._decorator}],execute:function(){var r;t._RF.push({},"b6438tG5d9HbrWqZWT8q7iA","MaterialFlash",void 0);var i=a.ccclass;e("MaterialFlash",i("MaterialFlash")(r=function(){function e(e,t,a,r){this.resetMaterialTimeout=null,this.meshRenderer=e,this.defaultMaterial=t,this.flashMaterial=a,this.flashDuration=r}var t=e.prototype;return t.damageFlash=function(){var e=this;this.meshRenderer&&this.flashMaterial&&this.defaultMaterial?(this.meshRenderer.material=this.flashMaterial,this.resetMaterialTimeout&&clearTimeout(this.resetMaterialTimeout),this.resetMaterialTimeout=setTimeout((function(){e.meshRenderer.material=e.defaultMaterial,e.resetMaterialTimeout=null}),1e3*this.flashDuration)):console.error("Missing required material or meshRenderer.")},t.destroy=function(){this.resetMaterialTimeout&&clearTimeout(this.resetMaterialTimeout)},e}())||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerMovement.ts","./PlayerAnimation.ts","./WeaponController.ts"],(function(t){"use strict";var e,a,n,i,r,o;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy,n=t._decorator},function(t){i=t.PlayerMovement},function(t){r=t.PlayerAnimation},function(t){o=t.WeaponController}],execute:function(){var s;a._RF.push({},"2447cajLClAI4zb5aL7fJKD","Player",void 0);var l=n.ccclass;t("Player",l("Player")(s=function(){function t(t,e,a,n,i,r){this.playerMovement=null,this.playerAnimation=null,this.weaponController=null,this.damageableDetector=null,this.updateManager=t,this.dataContainer=e,this.inputManager=a,this.cameraManager=n,this.cameraMovement=i,this.playerAvatar=r,this.setup()}var a=t.prototype;return a.setup=function(){this.cameraMovement.setTarget(this.playerAvatar.node),this.inputManager.on("inputStart",this.onInputStart.bind(this)),this.inputManager.on("inputMove",this.onInputMove.bind(this)),this.inputManager.on("inputEnd",this.onInputEnd.bind(this));var t=this.dataContainer.PlayerMovementData;this.playerMovement=new i(this.playerAvatar.node,this.playerAvatar.RigidBody,t.MovementSpeed,t.RotationSpeed,this.cameraManager.CameraAngle),this.updateManager.registerUpdatable(this.playerMovement),this.playerAnimation=new r(this.playerAvatar.Animator),this.playerAvatar.AnimationEventListener.on("animationEvent",this.onAnimationEvent.bind(this)),this.damageableDetector=this.playerAvatar.DamageableDetector,this.damageableDetector.on("detectChanged",this.detectChanged.bind(this)),this.weaponController=new o(this.playerAvatar.WeaponContainer,this.dataContainer.getWeaponData(0))},a.onInputStart=function(t){this.playerMovement.startMovement(t),this.playerAnimation.startMovement()},a.onInputMove=function(t){this.playerMovement.updateMovement(t)},a.onInputEnd=function(){this.playerMovement.stopMovement(),this.playerAnimation.stopMovement()},a.onAnimationEvent=function(t){t===this.playerAnimation.AttackEventName&&this.damageCurrentTargets()},a.detectChanged=function(t){t.size>0?this.playerAnimation.enableAttack():this.playerAnimation.disableAttack()},a.damageCurrentTargets=function(){var t=this;this.damageableDetector.getDetectedDamageables().forEach((function(e){t.weaponController.damageTarget(e)}))},e(t,[{key:"WeaponController",get:function(){return this.weaponController}}]),t}())||s);a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var a,e,i;return{setters:[function(t){a=t.createClass},function(t){e=t.cclegacy,i=t._decorator}],execute:function(){var n;e._RF.push({},"7af3aWdY2FJOIBw2GV36EVA","PlayerAnimation",void 0);var r=i.ccclass;t("PlayerAnimation",r("PlayerAnimation")(n=function(){function t(t){this.moveTriggerName="move_b",this.attackTriggerName="attack_b",this.attackEventName="Attack",this.animator=t}var e=t.prototype;return e.startMovement=function(){this.animator.setValue(this.moveTriggerName,!0)},e.stopMovement=function(){this.animator.setValue(this.moveTriggerName,!1)},e.enableAttack=function(){this.animator.setValue(this.attackTriggerName,!0)},e.disableAttack=function(){this.animator.setValue(this.attackTriggerName,!1)},a(t,[{key:"AttackEventName",get:function(){return this.attackEventName}}]),t}())||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerAvatar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DamageableDetector.ts","./AnimationEventListener.ts","./RotateToTarget.ts"],(function(e){"use strict";var t,n,i,r,o,a,l,u,c,s,b,f,p,g,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,l=e._decorator,u=e.RigidBody,c=e.Collider,s=e.Node,b=e.animation,f=e.Component},function(e){p=e.DamageableDetector},function(e){g=e.AnimationEventListener},function(e){y=e.RotateToTarget}],execute:function(){var m,d,h,v,A,D,w,z,k,C,L,R,E,H,P,T,B,_,F;a._RF.push({},"67819aRm3NBHa2yQbaezqAJ","PlayerAvatar",void 0);var I=l.ccclass,N=l.property;e("PlayerAvatar",(m=I("PlayerAvatar"),d=N(u),h=N(c),v=N(s),A=N(p),D=N(b.AnimationController),w=N(g),z=N(s),k=N(y),m((R=t((L=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"rigidbody",R,r(t)),i(t,"collider",E,r(t)),i(t,"uiAnchor",H,r(t)),i(t,"damageableDetector",P,r(t)),i(t,"animator",T,r(t)),i(t,"animationEventListener",B,r(t)),i(t,"weaponContainer",_,r(t)),i(t,"directionHint",F,r(t)),t}return n(t,e),o(t,[{key:"RigidBody",get:function(){return this.rigidbody}},{key:"Collider",get:function(){return this.collider}},{key:"UIAnchor",get:function(){return this.uiAnchor}},{key:"DamageableDetector",get:function(){return this.damageableDetector}},{key:"Animator",get:function(){return this.animator}},{key:"AnimationEventListener",get:function(){return this.animationEventListener}},{key:"WeaponContainer",get:function(){return this.weaponContainer}},{key:"DirectionHint",get:function(){return this.directionHint}}]),t}(f)).prototype,"rigidbody",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(L.prototype,"collider",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(L.prototype,"uiAnchor",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(L.prototype,"damageableDetector",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(L.prototype,"animator",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(L.prototype,"animationEventListener",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(L.prototype,"weaponContainer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"directionHint",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=L))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerMovement.ts",["cc"],(function(e){"use strict";var t,i,n,r;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Vec2,r=e.Vec3}],execute:function(){var s;t._RF.push({},"b94e9IzSVBK6qsdPTC4lmQh","PlayerMovement",void 0);var a=i.ccclass;e("PlayerMovement",a("PlayerMovement")(s=function(){function e(e,t,i,r,s){this.currentDirection=new n,this.adjustedDirection=new n,this.hasInput=!1,this.sinCameraAngle=0,this.cosCameraAngle=0,this.playerNode=e,this.rigidbody=t,this.movementSpeed=i,this.rotationSpeed=r,this.calculateCameraValues(s)}var t=e.prototype;return t.calculateCameraValues=function(e){this.sinCameraAngle=Math.sin(e),this.cosCameraAngle=Math.cos(e)},t.lateUpdate=function(e){this.lockRigidbody()},t.update=function(e){this.hasInput&&(this.adjustDirection(),this.movePlayer(e),this.rotatePlayer(e))},t.adjustDirection=function(){this.adjustedDirection=new n(this.currentDirection.x*this.cosCameraAngle-this.currentDirection.y*this.sinCameraAngle,this.currentDirection.x*this.sinCameraAngle+this.currentDirection.y*this.cosCameraAngle),this.adjustedDirection=this.adjustedDirection.normalize()},t.startMovement=function(e){this.hasInput=!0,this.currentDirection=e,this.rigidbody.linearDamping=0},t.updateMovement=function(e){this.currentDirection=e},t.stopMovement=function(){this.hasInput=!1,this.currentDirection=n.ZERO,this.rigidbody.setLinearVelocity(r.ZERO),this.rigidbody.linearDamping=1},t.lockRigidbody=function(){var e=this.playerNode.eulerAngles;this.playerNode.eulerAngles=new r(0,e.y,0);var t=this.playerNode.position;this.playerNode.position=new r(t.x,0,t.z)},t.movePlayer=function(e){var t=new r(this.adjustedDirection.x*this.movementSpeed*e,0,-1*this.adjustedDirection.y*this.movementSpeed*e);this.rigidbody.setLinearVelocity(t)},t.rotatePlayer=function(e){var t=Math.atan2(this.adjustedDirection.y,this.adjustedDirection.x)*(180/Math.PI)+90,i=this.playerNode.eulerAngles.y,n=this.normalizeAngle(t-i),s=this.rotationSpeed*e;i+=Math.abs(n)<=s?n:Math.sign(n)*s,this.playerNode.eulerAngles=new r(this.playerNode.eulerAngles.x,this.normalizeAngle(i),this.playerNode.eulerAngles.z)},t.normalizeAngle=function(e){for(;e>180;)e-=360;for(;e<-180;)e+=360;return e},e}())||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerMovementData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,i,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e._decorator}],execute:function(){var a,c,u,l;i._RF.push({},"56776SH95VICbG6P/lIpPPX","PlayerMovementData",void 0);var p=o.ccclass,s=o.property;e("PlayerMovementData",p("PlayerMovementData")((u=t((c=function(){function e(){n(this,"movementSpeed",u,this),n(this,"rotationSpeed",l,this)}return r(e,[{key:"MovementSpeed",get:function(){return this.movementSpeed}},{key:"RotationSpeed",get:function(){return this.rotationSpeed}}]),e}()).prototype,"movementSpeed",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=t(c.prototype,"rotationSpeed",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a=c))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["cc"],(function(o){"use strict";var t,e,n;return{setters:[function(o){t=o.cclegacy,e=o._decorator,n=o.instantiate}],execute:function(){var a;t._RF.push({},"89bdaMHuIlJlK+7N9ItEunp","PoolManager",void 0);var r=e.ccclass;o("PoolManager",r("PoolManager")(a=function(){function o(o){this.pools=new Map,this.prepool(o)}var t=o.prototype;return t.spawn=function(o,t){var e=this;void 0===t&&(t=0);var a,r=o.name,s=this.pools.get(r);return(a=s&&s.length>0?s.pop():n(o)).active=!0,t>0&&setTimeout((function(){e.despawn(a)}),1e3*t),a},t.despawn=function(o){var t=o.name,e=this.pools.get(t);e||(e=[],this.pools.set(t,e)),e.includes(o)||(o.active=!1,e.push(o))},t.prepool=function(o){var t=this;o.forEach((function(o){t.prePool(o.Prefab,o.Amount)}))},t.prePool=function(o,t){var e=o.name,a=this.pools.get(e);a||(a=[],this.pools.set(e,a));for(var r=0;r<t;r++){var s=n(o);s.active=!1,a.push(s)}},o}())||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/PopupUIHandler.ts",["cc","./UICounter.ts"],(function(e){"use strict";var t,n,r,o;return{setters:[function(e){t=e.cclegacy,n=e._decorator,r=e.Animation},function(e){o=e.UICounter}],execute:function(){var a;t._RF.push({},"11aa8XRNKhMY5j7KQimyGRt","PopupUIHandler",void 0);var s=n.ccclass;e("PopupUIHandler",s("PopupUIHandler")(a=function(){function e(e,t,n,r){this.referencesContainer=e,this.dataContainer=t,this.poolManager=n,this.uiManager=r}var t=e.prototype;return t.requestResourcePopup=function(e,t,n){var r=this.referencesContainer.UIReferences.ResourcesPopup,a=this.requestPopup(r,n),s=this.dataContainer.getResourceData(e).Icon,u=a.getComponent(o);u.setIcon(s),u.setText("+"+t.toString())},t.requestUpgradePopup=function(e){var t=this.referencesContainer.UIReferences.UpgradePopup;this.requestPopup(t,e)},t.requestPopup=function(e,t){var n=this,o=this.poolManager.spawn(e);this.uiManager.addWorldToUIFollower(o,t);var a=o.getComponent(r);return a.on(r.EventType.FINISHED,(function(){n.poolManager.despawn(o),a.off(r.EventType.FINISHED)})),a.play(),o},e}())||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/PrepoolingData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,i,o,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e._decorator,a=e.Prefab}],execute:function(){var u,c,l,p,s,f;i._RF.push({},"ac60719CKZK2LL6k7exqT55","PrepoolingData",void 0);var b=o.ccclass,g=o.property;e("PrepoolingData",(u=b("PrepoolingData"),c=g(a),u((s=t((p=function(){function e(){n(this,"prefab",s,this),n(this,"amount",f,this)}return r(e,[{key:"Prefab",get:function(){return this.prefab}},{key:"Amount",get:function(){return this.amount}}]),e}()).prototype,"prefab",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(p.prototype,"amount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=p))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/ReferencesContainer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIReferences.ts","./PrepoolingData.ts"],(function(e){"use strict";var r,n,t,i,a,o,l,c,u,s,f,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,l=e._decorator,c=e.Material,u=e.Prefab,s=e.Component},function(e){f=e.UIReferences},function(e){p=e.PrepoolingData}],execute:function(){var g,b,h,y,R,D,m,d,M,F,v;o._RF.push({},"c72f2HwWA5KM5JgnsYMDbG7","ReferencesContainer",void 0);var w=l.ccclass,z=l.property;e("ReferencesContainer",(g=w("ReferencesContainer"),b=z(f),h=z(p),y=z(c),R=z(u),g((d=r((m=function(e){function r(){for(var r,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,t(r,"uiReferences",d,i(r)),t(r,"prepoolingData",M,i(r)),t(r,"flashMaterial",F,i(r)),t(r,"damageVFX",v,i(r)),r}return n(r,e),a(r,[{key:"UIReferences",get:function(){return this.uiReferences}},{key:"PrepoolingData",get:function(){return this.prepoolingData}},{key:"FlashMaterial",get:function(){return this.flashMaterial}},{key:"DamageVFX",get:function(){return this.damageVFX}}]),r}(s)).prototype,"uiReferences",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(m.prototype,"prepoolingData",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=r(m.prototype,"flashMaterial",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(m.prototype,"damageVFX",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=m))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceCollection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceData.ts","./ResourceType.ts"],(function(e){"use strict";var r,t,o,a,c,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){o=e.cclegacy,a=e._decorator},function(e){c=e.ResourceData},function(e){s=e.ResourceType}],execute:function(){var u,n,i,l,p;o._RF.push({},"27f07URTSNGraFt5aEm7UuD","ResourceCollection",void 0);var y=a.ccclass,R=a.property;e("ResourceCollection",(u=y("ResourceCollection"),n=R(c),u((p=r((l=function(){function e(){t(this,"resourceDataArray",p,this),this.resourceDataMap=new Map}var r=e.prototype;return r.initialize=function(){var e=this;this.resourceDataMap.clear(),this.resourceDataArray.forEach((function(r){r&&r.ResourceType!==s.None?e.resourceDataMap.has(r.ResourceType)?console.warn("Duplicate ResourceType found: "+r.ResourceType):e.resourceDataMap.set(r.ResourceType,r):console.warn("ResourceData entry is missing or has invalid ResourceType.")}))},r.getResourceData=function(e){return this.resourceDataMap.get(e)||null},e}()).prototype,"resourceDataArray",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=l))||i));o._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceType.ts"],(function(e){"use strict";var r,t,i,n,o,c,u,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.createClass,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e._decorator,c=e.Enum,u=e.SpriteFrame},function(e){s=e.ResourceType}],execute:function(){var a,p,l,y,f,R,h;n._RF.push({},"3d822iyWr1MKovT8+wCIJaN","ResourceData",void 0);var b=o.ccclass,g=o.property;e("ResourceData",(a=b("ResourceData"),p=g({type:c(s)}),l=g(u),a((R=r((f=function(){function e(){i(this,"resourceType",R,this),i(this,"icon",h,this)}return t(e,[{key:"ResourceType",get:function(){return this.resourceType}},{key:"Icon",get:function(){return this.icon}}]),e}()).prototype,"resourceType",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.None}}),h=r(f.prototype,"icon",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=f))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceType.ts","./EventEmitterMixin.ts"],(function(e){"use strict";var t,r,s,u,n;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,s=e._decorator},function(e){u=e.ResourceType},function(e){n=e.EventEmitterMixin}],execute:function(){var o;r._RF.push({},"639d59/BZtJQaW/rOIBMDl7","ResourceManager",void 0);var c=s.ccclass;e("ResourceManager",c("ResourceManager")(o=function(e){function r(){var t;return(t=e.call(this)||this).resources=null,t.getDefaultValues(),t}t(r,e);var s=r.prototype;return s.getDefaultValues=function(){this.resources=new Map,this.resources.set(u.Wood,0),this.resources.set(u.Metal,0)},s.getResourceAmount=function(e){return this.resources.get(e)||0},s.addResource=function(e,t){var r=this.getResourceAmount(e),s=r+t;s!==r&&(this.resources.set(e,s),this.emit("resourceChanged",e,s))},s.spendResource=function(e,t){var r=this.getResourceAmount(e);if(r>=t){var s=r-t;return this.resources.set(e,s),this.emit("resourceChanged",e,s),!0}return!1},r}(n(function(){return function(){}}())))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceType.ts",["cc"],(function(e){"use strict";var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){var t;e("ResourceType",void 0),o._RF.push({},"86abaUtPkRBO5OSDd6lPgYV","ResourceType",void 0),function(e){e[e.None=0]="None",e[e.Wood=20]="Wood",e[e.Metal=30]="Metal"}(t||(t=e("ResourceType",{}))),o._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceUIHandler.ts",["cc","./UICounter.ts","./ResourceType.ts"],(function(e){"use strict";var r,n,t,o;return{setters:[function(e){r=e.cclegacy,n=e._decorator},function(e){t=e.UICounter},function(e){o=e.ResourceType}],execute:function(){var s;r._RF.push({},"93f4cnFvJFO0ZwxlXnvVI3k","ResourceUIHandler",void 0);var c=n.ccclass;e("ResourceUIHandler",c("ResourceUIHandler")(s=function(){function e(e,r,n,t,o){this.resourceUI=new Map,this.dataContainer=e,this.referencesContainer=r,this.poolManager=n,this.resourceManager=t,this.resourceContainer=o,this.setupResourceUI()}var r=e.prototype;return r.setupResourceUI=function(){var e=this.referencesContainer.UIReferences.ResourceCounterPrefab;for(var r in o){var n=o[r];if(n!==o.None){var s=this.poolManager.spawn(e);this.resourceContainer.addChild(s);var c=s.getComponent(t);c.setIcon(this.dataContainer.getResourceData(n).Icon),c.setAmount(0),this.resourceUI.set(n,c)}}this.resourceManager.on("resourceChanged",this.onResourceChanged.bind(this))},r.onResourceChanged=function(e,r){var n=this.resourceUI.get(e);n&&n.setAmount(r)},e}())||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/RotateToTarget.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,o,a,n,s,c,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,s=t.Node,c=t.Vec3,l=t.math,u=t.Component}],execute:function(){var g,h,p,d,f;a._RF.push({},"146ddQgz+RNCbShKTgQ0vvn","RotateToTarget",void 0);var v=n.ccclass,D=n.property;t("RotateToTarget",(g=v("RotateToTarget"),h=D(s),g((f=e((d=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,i(e,"target",f,o(e)),e.targetDirection=new c,e}r(e,t);var a=e.prototype;return a.setState=function(t){this.node.active=t},a.setTarget=function(t){this.target=t},a.lateUpdate=function(t){this.rotate()},a.rotate=function(){if(this.target){c.subtract(this.targetDirection,this.target.worldPosition,this.node.worldPosition),this.targetDirection.y=0,c.normalize(this.targetDirection,this.targetDirection);var t=Math.atan2(this.targetDirection.x,this.targetDirection.z);this.node.setWorldRotationFromEuler(0,l.toDegree(t),0)}},e}(u)).prototype,"target",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/ServiceLocator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,c,n;return{setters:[function(e){t=e.createClass},function(e){c=e.cclegacy,n=e._decorator}],execute:function(){var r,s;c._RF.push({},"bd5cbrSdu1ODLAQhfF1sSgm","ServiceLocator",void 0);var i=n.ccclass;e("ServiceLocator",i("ServiceLocator")(((s=function(){function e(){this.services=new Map}var c=e.prototype;return c.register=function(e,t){this.services.set(e,t)},c.get=function(e){return this.services.get(e)},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,r=s))||r);c._RF.pop()}}}));

System.register("chunks:///_virtual/TriggerZone.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventEmitterMixin.ts"],(function(e){"use strict";var n,t,r,o,i,s;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator,o=e.Collider,i=e.Component},function(e){s=e.EventEmitterMixin}],execute:function(){var g;t._RF.push({},"876e6QoVW1ELa1sw0UvmL9C","TriggerZone",void 0);var c=r.ccclass;e("TriggerZone",c("TriggerZone")(g=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this.node.getComponent(o);e&&e.on("onTriggerEnter",this.handleTriggerEnter,this)},r.handleTriggerEnter=function(e){var n=e.otherCollider.node;this.emit("triggerEnter",n)},r.onDestroy=function(){var e=this.node.getComponent(o);e&&e.off("onTriggerEnter",this.handleTriggerEnter,this)},t}(s(i)))||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/TypedEventEmitter.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ef234FRfHpKo5XZmneJsBwv","TypedEventEmitter",void 0);t("TypedEventEmitter",function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){var n=this.listeners[t];n&&(this.listeners[t]=n.filter((function(t){return t!==e})))},e.removeAllListeners=function(t){delete this.listeners[t]},e.emit=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=this.listeners[t];r&&r.forEach((function(t){return t.apply(void 0,n)}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UICounter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,i,o,l,a,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,a=t.Sprite,c=t.Label,u=t.Component}],execute:function(){var s,p,f,b,h,y,g;o._RF.push({},"4ce21atDDRGqLLfakjv9MYd","UICounter",void 0);var v=l.ccclass,d=l.property;t("UICounter",(s=v("UICounter"),p=d(a),f=d(c),s((y=e((h=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"icon",y,i(e)),r(e,"label",g,i(e)),e}n(e,t);var o=e.prototype;return o.setIcon=function(t){this.icon&&(this.icon.spriteFrame=t)},o.setText=function(t){this.label&&(this.label.string=t)},o.setAmount=function(t){this.label&&(this.label.string=t.toString())},e}(u)).prototype,"icon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(h.prototype,"label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIJoystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventEmitterMixin.ts"],(function(t){"use strict";var i,e,s,o,n,c,h,r,a,u,l,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,c=t._decorator,h=t.Node,r=t.Vec2,a=t.view,u=t.Vec3,l=t.Component},function(t){y=t.EventEmitterMixin}],execute:function(){var k,S,p,v,g,m,d,T,f;n._RF.push({},"d9211qu1Y1OboQaTNo6TnuY","UIJoystick",void 0);var j=c.ccclass,E=c.property;t("UIJoystick",(k=j("UIJoystick"),S=E(h),p=E(h),k((g=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return i=t.call.apply(t,[this].concat(n))||this,s(i,"joystickBase",m,o(i)),s(i,"joystickStick",d,o(i)),s(i,"maxStickDistance",T,o(i)),s(i,"movementThreshold",f,o(i)),i.touchStartPos=r.ZERO,i.screenWidth=0,i.screenHeight=0,i.isMoving=!1,i}e(i,t);var n=i.prototype;return n.start=function(){this.joystickBase&&this.joystickStick?(this.screenWidth=a.getVisibleSize().width,this.screenHeight=a.getVisibleSize().height,this.node.on(h.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.setVisualState(!1)):console.error("Joystick components are not properly assigned in the editor.")},n.onTouchStart=function(t){this.setVisualState(!0),this.touchStartPos=t.getUILocation(),this.joystickBase.setPosition(this.touchStartPos.x-this.screenWidth/2,this.touchStartPos.y-this.screenHeight/2,0),this.joystickStick.setPosition(this.touchStartPos.x-this.screenWidth/2,this.touchStartPos.y-this.screenHeight/2,0),this.emit("joystickStart",new r(0,0)),this.isMoving=!1},n.onTouchMove=function(t){var i=t.getUILocation(),e=new r(i.x-this.touchStartPos.x,i.y-this.touchStartPos.y),s=e.length(),o=new r(e.x/this.maxStickDistance,e.y/this.maxStickDistance);o.length()>1&&(o=o.normalize());var n=new u(this.touchStartPos.x+o.x*this.maxStickDistance-this.screenWidth/2,this.touchStartPos.y+o.y*this.maxStickDistance-this.screenHeight/2,0);this.joystickStick.setPosition(n),s>this.movementThreshold?(this.isMoving||(this.isMoving=!0,this.emit("joystickInputStart",o)),this.emit("joystickMove",o)):this.isMoving&&(this.isMoving=!1,this.emit("joystickRelease"))},n.onTouchEnd=function(){this.joystickBase.setPosition(u.ZERO),this.joystickStick.setPosition(u.ZERO),this.setVisualState(!1),this.emit("joystickRelease"),this.isMoving=!1},n.setVisualState=function(t){this.joystickBase.active=t,this.joystickStick.active=t},i}(y(l)),m=i(g.prototype,"joystickBase",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=i(g.prototype,"joystickStick",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(g.prototype,"maxStickDistance",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),f=i(g.prototype,"movementThreshold",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),v=g))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WorldToUIFollower.ts","./ResourceUIHandler.ts","./DamageUIHandler.ts","./PopupUIHandler.ts","./JoystickUIHandler.ts"],(function(e){"use strict";var n,t,a,o,i,r,s,d;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,a=e._decorator},function(e){o=e.WorldToUIFollower},function(e){i=e.ResourceUIHandler},function(e){r=e.DamageUIHandler},function(e){s=e.PopupUIHandler},function(e){d=e.JoystickUIHandler}],execute:function(){var c;t._RF.push({},"265f0PWUqRKvb8UVBHz/8w2","UIManager",void 0);var l=a.ccclass;e("UIManager",l("UIManager")(c=function(){function e(e,n,t,a,o,c,l,u){this.resourceUIHandler=void 0,this.damageUIHandler=void 0,this.popupUIHandler=void 0,this.joystickUIHandler=void 0,this.cameraManager=e,this.canvas=n,this.gameplayWindow=t,this.victoryWindow=a,this.gameplayWindow.node.setParent(this.canvas.node),this.victoryWindow.node.setParent(this.canvas.node),this.resourceUIHandler=new i(c,o,l,u,this.gameplayWindow.ResourceContainer),this.damageUIHandler=new r(o,l,this),this.popupUIHandler=new s(o,c,l,this),this.joystickUIHandler=new d(t.Joystick)}var t=e.prototype;return t.showGameplayState=function(){this.gameplayWindow.show(),this.victoryWindow.hide()},t.showVictoryState=function(){this.gameplayWindow.hide(),this.victoryWindow.show()},t.addWorldToUIFollower=function(e,n){var t=e.getComponent(o);t||(t=e.addComponent(o)),t.init(this.cameraManager.getMainCamera(),n,this.canvas.node),e.parent=this.gameplayWindow.FollowersContainer},n(e,[{key:"Canvas",get:function(){return this.canvas}},{key:"GameplayWindow",get:function(){return this.gameplayWindow}},{key:"ResourceUIHandler",get:function(){return this.resourceUIHandler}},{key:"DamageUIHandler",get:function(){return this.damageUIHandler}},{key:"PopupUIHandler",get:function(){return this.popupUIHandler}},{key:"JoystickUIHandler",get:function(){return this.joystickUIHandler}}]),e}())||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIReferences.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,i,n,u,o;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.createClass,i=e.initializerDefineProperty},function(e){n=e.cclegacy,u=e._decorator,o=e.Prefab}],execute:function(){var a,c,l,f,s,p,b,P,g,y,h,d,m,w,k,v,B;n._RF.push({},"168d1QnlCFCYId5w1oXq9Ev","UIReferences",void 0);var z=u.ccclass,R=u.property;e("UIReferences",(a=z("UIReferences"),c=R(o),l=R(o),f=R(o),s=R(o),p=R(o),b=R(o),P=R(o),a((h=r((y=function(){function e(){i(this,"resourceCounterPrefab",h,this),i(this,"uiBarPrefab",d,this),i(this,"uiDamageBlockedPrefab",m,this),i(this,"resourcesPopup",w,this),i(this,"upgradePopup",k,this),i(this,"gameplayWindowPrefab",v,this),i(this,"victoryWindowPrefab",B,this)}return t(e,[{key:"ResourceCounterPrefab",get:function(){return this.resourceCounterPrefab}},{key:"UIBarPrefab",get:function(){return this.uiBarPrefab}},{key:"UIDamageBlockedPrefab",get:function(){return this.uiDamageBlockedPrefab}},{key:"ResourcesPopup",get:function(){return this.resourcesPopup}},{key:"UpgradePopup",get:function(){return this.upgradePopup}},{key:"GameplayWindowPrefab",get:function(){return this.gameplayWindowPrefab}},{key:"VictoryWindowPrefab",get:function(){return this.victoryWindowPrefab}}]),e}()).prototype,"resourceCounterPrefab",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=r(y.prototype,"uiBarPrefab",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(y.prototype,"uiDamageBlockedPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=r(y.prototype,"resourcesPopup",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=r(y.prototype,"upgradePopup",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(y.prototype,"gameplayWindowPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=r(y.prototype,"victoryWindowPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var o,t,i,e,c;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,i=n._decorator,e=n.Animation,c=n.Component}],execute:function(){var r;t._RF.push({},"a0095+j+AlBJYs/jjl1Vqz8","UIWindow",void 0);var s=i.ccclass;n("UIWindow",s("UIWindow")(r=function(n){function t(){for(var o,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return(o=n.call.apply(n,[this].concat(i))||this).onShowAnimation=null,o}o(t,n);var i=t.prototype;return i.onLoad=function(){this.onShowAnimation=this.getComponent(e)},i.show=function(){this.node.active=!0,this.onShowAnimation&&this.onShowAnimation.play()},i.hide=function(){this.node.active=!1},t}(c))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/UpdateManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,a,r,n,s;return{setters:[function(e){t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,n=e._decorator,s=e.Component}],execute:function(){var u;r._RF.push({},"14d90dfdVNHY6xjinoJurLF","UpdateManager",void 0);var o=n.ccclass;e("UpdateManager",o("UpdateManager")(u=function(e){function r(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).updatables=[],t}t(r,e);var n=r.prototype;return n.registerUpdatable=function(e){e&&!this.updatables.includes(e)&&this.updatables.push(e)},n.unregisterUpdatable=function(e){if(e){var t=this.updatables.indexOf(e);-1!==t&&this.updatables.splice(t,1)}},n.update=function(e){for(var t,r=a(this.updatables);!(t=r()).done;){var n=t.value;n&&n.update(e)}},n.lateUpdate=function(e){for(var t,r=a(this.updatables);!(t=r()).done;){var n=t.value;n&&n.lateUpdate(e)}},r}(s))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/UpgradeCollection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UpgradeData.ts"],(function(r){"use strict";var t,e,a,n,o;return{setters:[function(r){t=r.applyDecoratedDescriptor,e=r.initializerDefineProperty},function(r){a=r.cclegacy,n=r._decorator},function(r){o=r.UpgradeData}],execute:function(){var i,c,p,u,l;a._RF.push({},"1f628KDbZhEcIC5GZGp46jX","UpgradeCollection",void 0);var g=n.ccclass,s=n.property;r("UpgradeCollection",(i=g("UpgradeCollection"),c=s({type:[o]}),i((l=t((u=function(){function r(){e(this,"upgradeDataArray",l,this)}var t=r.prototype;return t.getUpgradeData=function(r){if(r>=0&&r<this.upgradeDataArray.length)return this.upgradeDataArray[r];console.error("No UpgradeData with ID "+r+".")},t.getUpgradeAmount=function(){return this.upgradeDataArray.length},r}()).prototype,"upgradeDataArray",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=u))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/UpgradeData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceType.ts"],(function(e){"use strict";var r,t,n,o,u,i,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.createClass,n=e.initializerDefineProperty},function(e){o=e.cclegacy,u=e._decorator,i=e.Enum},function(e){c=e.ResourceType}],execute:function(){var a,s,p,l,y,f;o._RF.push({},"bd73fLFZzZALKb1lawXrqAR","UpgradeData",void 0);var g=u.ccclass,b=u.property;e("UpgradeData",(a=g("UpgradeData"),s=b({type:i(c)}),a((y=r((l=function(){function e(){n(this,"resourceType",y,this),n(this,"resourceAmount",f,this)}return t(e,[{key:"ResourceType",get:function(){return this.resourceType}},{key:"ResourceAmount",get:function(){return this.resourceAmount}}]),e}()).prototype,"resourceType",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.None}}),f=r(l.prototype,"resourceAmount",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=l))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/UpgradeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventEmitterMixin.ts"],(function(e){"use strict";var r,a,t,n,i,s;return{setters:[function(e){r=e.inheritsLoose,a=e.createClass,t=e.assertThisInitialized},function(e){n=e.cclegacy,i=e._decorator},function(e){s=e.EventEmitterMixin}],execute:function(){var u;n._RF.push({},"2061bTGqrZKjpPrslQeT4Vu","UpgradeManager",void 0);var c=i.ccclass;e("UpgradeManager",c("UpgradeManager")(u=function(e){function n(r,a){var n;return(n=e.call(this)||this).currentUpgradeIndex=0,n.currentUpgradeData=null,n.resourceChangedHandler=n.checkUpgradeAvailability.bind(t(n)),n.dataContainer=r,n.resourceManager=a,n.initEventListeners(),n.loadCurrentUpgradeData(),n}r(n,e);var i=n.prototype;return i.initEventListeners=function(){this.resourceManager.on("resourceChanged",this.resourceChangedHandler)},i.loadCurrentUpgradeData=function(){this.currentUpgradeData=this.dataContainer.getUpgradeData(this.currentUpgradeIndex),this.emit("upgradeDataLoaded",this.currentUpgradeData)},i.checkUpgradeAvailability=function(){var e=this.resourceManager.getResourceAmount(this.currentUpgradeData.ResourceType)>=this.currentUpgradeData.ResourceAmount;this.emit("upgradeAvailabilityChecked",e)},i.applyUpgrade=function(){if(this.resourceManager.spendResource(this.currentUpgradeData.ResourceType,this.currentUpgradeData.ResourceAmount)){if(this.emit("upgradeApplied",this.currentUpgradeIndex),this.currentUpgradeIndex>=this.dataContainer.getUpgradeAmount()-1)return this.disableUpgradeManager(),void this.emit("upgradeMaxReached");this.currentUpgradeIndex++,this.loadCurrentUpgradeData(),this.checkUpgradeAvailability()}},i.disableUpgradeManager=function(){this.resourceManager.off("resourceChanged",this.resourceChangedHandler)},a(n,[{key:"CurrentUpgradeData",get:function(){return this.currentUpgradeData}}]),n}(s(function(){return function(){}}())))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/VictoryWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIWindow.ts"],(function(t){"use strict";var e,r,i,n,o,c,u,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){c=t.cclegacy,u=t._decorator,a=t.Button},function(t){s=t.UIWindow}],execute:function(){var l,p,f,y,d;c._RF.push({},"e1e728qfHFEo7dIjESQCfea","VictoryWindow",void 0);var h=u.ccclass,w=u.property;t("VictoryWindow",(l=h("VictoryWindow"),p=w(a),l((d=e((y=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,i(e,"MRAIDButton",d,n(e)),e}return r(e,t),o(e,[{key:"MRAIDBurron",get:function(){return this.MRAIDButton}}]),e}(s)).prototype,"MRAIDButton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=y))||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponCollection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WeaponData.ts"],(function(e){"use strict";var t,o,a,n,r;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){a=e.cclegacy,n=e._decorator},function(e){r=e.WeaponData}],execute:function(){var i,c,p,l,u;a._RF.push({},"c51e8H4rABIvo5kUUjckiQ2","WeaponCollection",void 0);var s=n.ccclass,f=n.property;e("WeaponCollection",(i=s("WeaponCollection"),c=f({type:[r]}),i((u=t((l=function(){function e(){o(this,"weaponDataArray",u,this)}return e.prototype.getWeaponData=function(e){if(e>=0&&e<this.weaponDataArray.length)return this.weaponDataArray[e];console.error("No WeaponData with ID "+e+".")},e}()).prototype,"weaponDataArray",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=l))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponController.ts",["cc"],(function(e){"use strict";var a,n,t,o;return{setters:[function(e){a=e.cclegacy,n=e._decorator,t=e.instantiate,o=e.Quat}],execute:function(){var r;a._RF.push({},"a156agYkRpBU7dy0AohT60V","WeaponController",void 0);var i=n.ccclass;e("WeaponController",i("WeaponController")(r=function(){function e(e,a){this.currentWeaponData=null,this.currentWeaponVisual=null,this.weaponContainer=e,this.updateWeapon(a)}var a=e.prototype;return a.updateWeapon=function(e){e?(this.currentWeaponData=e,this.updateWeaponVisual(e.Prefab)):console.error("Weapon data is null or undefined.")},a.updateWeaponVisual=function(e){null!=this.currentWeaponVisual&&this.currentWeaponVisual.destroy(),e?(this.currentWeaponVisual=t(e),this.currentWeaponVisual.setParent(this.weaponContainer),this.currentWeaponVisual.setPosition(0,0,0),this.currentWeaponVisual.setRotation(o.IDENTITY)):console.warn("Weapon prefab is null or undefined.")},a.damageTarget=function(e){e?this.currentWeaponData?e.receiveDamage(this.currentWeaponData.Damage,this.currentWeaponData.Level):console.warn("No weapon data available to deal damage."):console.warn("Target is null or undefined.")},e}())||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,a,n,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,i=e.initializerDefineProperty},function(e){a=e.cclegacy,n=e._decorator,o=e.Prefab}],execute:function(){var u,l,c,s,p,f,b;a._RF.push({},"248b4RrHulFYrMk7Z2OiWBU","WeaponData",void 0);var g=n.ccclass,h=n.property;e("WeaponData",(u=g("WeaponData"),l=h(o),u((p=t((s=function(){function e(){i(this,"prefab",p,this),i(this,"damage",f,this),i(this,"level",b,this)}return r(e,[{key:"Prefab",get:function(){return this.prefab}},{key:"Damage",get:function(){return this.damage}},{key:"Level",get:function(){return this.level}}]),e}()).prototype,"prefab",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(s.prototype,"damage",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=t(s.prototype,"level",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=s))||c));a._RF.pop()}}}));

System.register("chunks:///_virtual/WorldToUIFollower.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,e,r,n,l;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,r=o._decorator,n=o.Vec3,l=o.Component}],execute:function(){var a;e._RF.push({},"a83f0C7LJpIZoqQSZACtYpO","WorldToUIFollower",void 0);var i=r.ccclass;o("WorldToUIFollower",i("WorldToUIFollower")(a=function(o){function e(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=o.call.apply(o,[this].concat(r))||this).camera=null,t.targetNode=null,t.canvasNode=null,t}t(e,o);var r=e.prototype;return r.init=function(o,t,e){this.camera=o,this.targetNode=t,this.canvasNode=e,this.followTarget()},r.onEnable=function(){this.followTarget()},r.lateUpdate=function(o){this.followTarget()},r.followTarget=function(){if(this.targetNode){var o=new n;this.camera.convertToUINode(this.targetNode.worldPosition,this.canvasNode,o),this.node.setPosition(o.x,o.y,0)}},e}(l))||a);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});